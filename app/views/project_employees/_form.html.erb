<%= form_with(model: [@project, project_employee], local: true) do |form| %>
  <% if project_employee.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(project_employee.errors.count, "error") %> prohibited this project_employee from
        being saved:</h2>

      <ul>
        <% project_employee.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-row">
    <%= form.label :employee_id, :class => "mb-1 pt-2 name", :style => 'font-weight:bold' %>
    <div class="value">
      <div class="input-group">
        <%= form.select :employee_ids, options_for_select(@project.client_company.employees.map { |c| [c.employee_name, c.id] }), {}, {class: "form-control selectpicker", data: {"live-search": true}, multiple: true} %>
      </div>
    </div>
  </div>

  <div class="form-row">
    <%= form.label :contract_start_date, :class => "mb-1 pt-2 name", :style => 'font-weight:bold' %>
    <div class="value">
      <div class="input-group">
        <%= form.date_field :contract_start_date, :class => "form-control py-2", :required => true %>
      </div>
    </div>
  </div>

  <div class="form-row">
    <%= form.label :contract_end_date, :class => "mb-1 pt-2 name", :style => 'font-weight:bold' %>
  <div class="value">
    <div class="input-group">
      <%= form.date_field :contract_end_date, :class => "form-control py-2", :required => true %>
    </div>
  </div>
  </div>

  <div class="form-row">
      <%= form.label :employee_type, :class => "mb-1 pt-2 name", :style => 'font-weight:bold' %>
    <div class="value">
      <div class="input-group">
        <select name="project_employee[employee_type_id]" id="employee_type_id" class="form-control" required>
          <% @project.employee_types.each do |employee_type| %>
            <option value="<%= employee_type.id %>">
              <%= employee_type.employee_type %>
            </option>
          <% end %>
        </select>
      </div>
    </div>
  </div>

  <div class="form-row">
      <%= form.label :foreman, :class => "mb-1 pt-2 name", :style => 'font-weight:bold' %>
  <div class="value">
    <div class="input-group">
        <select name="project_employee[foreman_id]" id="forman_id" class="form-control">
          <% @project.foremen.each do |forman| %>
            <option value="<%= forman.id %>">
              <%= forman.employee.employee_name %>
            </option>
          <% end %>
        </select>
      </div>
    </div>
  </div>

  <div class="form-row">
      <%= form.label :other_manager, :class => "mb-1 pt-2 name", :style => 'font-weight:bold' %>
    <div class="value">
      <div class="input-group">
        <select name="project_employee[other_manager_id]" id="other_manager_id" class="form-control">
          <% @project.other_managers.each do |manager| %>
            <option value="<%= manager.id %>">
              <%= manager.employee.employee_name %>
            </option>
          <% end %>
        </select>
      </div>
    </div>
  </div>

  <div class="form-row">
      <%= form.label :project_company_id, :class => "mb-1 pt-2 name", :style => 'font-weight:bold' %>
    <div class="value">
      <div class="input-group">
        <select name="project_employee[project_company_id]" id="other_manager_id" class="form-control" required>
          <% @project.project_companies.each do |company| %>
            <option value="<%= company.id %>">
              <%= company.company_name %>
            </option>
          <% end %>
        </select>
      </div>
    </div>
  </div>


  <div class="row">
    <div class="col-md-3"></div>
    <div class="col-md-3">
      <div class="form-group mt-3 mb-0">
        <div class="actions">
          <%= form.submit 'Save', :class => 'btn btn-style bg-clr w-100' %>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group mt-3 mb-0">
        <div class="actions">
          <%= link_to "Cancel", project_project_employees_path, :class => 'btn btn-style bg-clr w-100' %>
        </div>
      </div>
    </div>
    <div class="col-md-3"></div>
  </div>
<% end %>
<script type="text/javascript">
    $(document).ready(function () {
        $('select').selectpicker();
    });
</script>